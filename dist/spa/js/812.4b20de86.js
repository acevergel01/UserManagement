"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[812],{8931:(t,e,s)=>{s.d(e,{Z:()=>d});var a=s(6417);const o=(t,e)=>{a.Z.create({type:e,message:t,position:"bottom-right"})},i={show:o},l=t=>{if(t.data)i.show(t.data.message,"positive");else{let e="";if(t.response.status<500)for(let s in t.response.data.errors)e=t.response.data.errors[s][0];else e="Internal server error. Try again later";i.show(e,"negative")}},d={show:l}},812:(t,e,s)=>{s.r(e),s.d(e,{default:()=>L});var a=s(3673),o=s(2323);const i={key:0,class:"text-h5 absolute-center"},l={key:1,flat:"",class:"q-pa-md"},d=(0,a._)("thead",{class:"bg-light-blue"},[(0,a._)("tr",null,[(0,a._)("th",{colspan:"6"},[(0,a._)("div",{class:"text-h5 q-my-sm text-left"},"Todo")])]),(0,a._)("tr",null,[(0,a._)("th",{class:"text-center"},"Task ID"),(0,a._)("th",{class:"text-center"},"Task"),(0,a._)("th",{class:"text-center"},"Assigned to"),(0,a._)("th",{class:"text-center"},"Notes"),(0,a._)("th",{class:"text-center"},"Status"),(0,a._)("th",{class:"text-center"},"Update")])],-1),n={class:"text-left"},r={class:"text-right"},c={class:"text-right"},h={class:"text-right"},u={class:"text-right"},p={key:0},m={colspan:"6"},g={class:"row q-px-lg"},f={class:"row q-px-lg q-mb-md"},w={class:"row q-px-lg"},k={class:"row q-px-lg q-mt-md"};function _(t,e,s,_,D,q){const b=(0,a.up)("q-btn"),x=(0,a.up)("q-markup-table"),y=(0,a.up)("q-input"),Z=(0,a.up)("q-select"),v=(0,a.up)("q-card-section"),C=(0,a.up)("q-card-actions"),W=(0,a.up)("q-form"),V=(0,a.up)("q-card"),T=(0,a.up)("q-dialog"),A=(0,a.up)("q-page");return q.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(A,{key:0,class:"flex flex-top"},{default:(0,a.w5)((()=>[D.canAccess?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",i," You do not have permission to access this page ")),D.canAccess?((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[d,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(D.todoData,((t,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("td",n,(0,o.zw)(t.id),1),(0,a._)("td",r,(0,o.zw)(t.task),1),(0,a._)("td",c,(0,o.zw)(t.assigned_to),1),(0,a._)("td",h,(0,o.zw)(t.notes),1),(0,a._)("td",u,(0,o.zw)(t.status),1),(0,a._)("td",null,[D.canDelete?((0,a.wg)(),(0,a.j4)(b,{key:0,icon:"delete",color:"negative",round:"",onClick:t=>q.deleteItem(e),flat:""},null,8,["onClick"])):(0,a.kq)("",!0),D.canModify?((0,a.wg)(),(0,a.j4)(b,{key:1,class:"q-pa-sm float-right",icon:"edit",color:"positive",onClick:t=>{q.show(),q.setItems(e,"update")},round:"",flat:""},null,8,["onClick"])):(0,a.kq)("",!0)])])))),128)),D.canAdd?((0,a.wg)(),(0,a.iD)("tr",p,[(0,a._)("td",m,[(0,a.Wm)(b,{class:"float-right",color:"blue",round:"",icon:"add_circle",flat:"",outlined:"",onClick:e[0]||(e[0]=t=>{q.show(),q.setItems(0,"")})})])])):(0,a.kq)("",!0)])])),_:1})])):(0,a.kq)("",!0),(0,a.Wm)(T,{onHide:q.hide,ref:"updateDialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{onSubmit:q.onOKClick},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a.Wm)(y,{class:"col",modelValue:D.form.task,"onUpdate:modelValue":e[1]||(e[1]=t=>D.form.task=t),outlined:"",label:"Task",rules:[t=>!!t||"Field is required"]},null,8,["modelValue","rules"])]),(0,a._)("div",f,[(0,a.Wm)(Z,{style:{"min-width":"100%"},outlined:"",modelValue:D.form.assigned_to,"onUpdate:modelValue":e[2]||(e[2]=t=>D.form.assigned_to=t),options:D.users,label:"Assign To"},null,8,["modelValue","options"])]),(0,a._)("div",w,[(0,a.Wm)(y,{class:"col",modelValue:D.form.notes,"onUpdate:modelValue":e[3]||(e[3]=t=>D.form.notes=t),outlined:"",label:"Notes",type:"textarea"},null,8,["modelValue"])]),(0,a._)("div",k,[(0,a.Wm)(Z,{style:{"min-width":"100%"},outlined:"",modelValue:D.form.status,"onUpdate:modelValue":e[4]||(e[4]=t=>D.form.status=t),options:D.options,label:"Status"},null,8,["modelValue","options"])])])),_:1}),(0,a.Wm)(C,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{label:"Submit",type:"submit",color:"primary"}),(0,a.Wm)(b,{color:"primary",label:"Cancel",onClick:q.hide},null,8,["onClick"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["onHide"])])),_:1}))}var D=s(8825),q=s(8931),b=s(1959);const x={name:"UserInfo",setup(){const t=(0,D.Z)();return{sendNotification(e,s){t.notify({type:s,message:e,position:"bottom-right"})},showLoading(e){t.loading.show({delay:e})},hideLoading(){t.loading.hide()}}},data(){return{loading:!0,canAccess:1,canAdd:0,canDelete:0,canModify:0,action:"",todoData:[],users:[],options:["On-Going","Pending","Finished"],form:{assigned_to:"",task:"",notes:"",status:(0,b.iH)(null)}}},computed:{isUpdating:function(){return"update"==this.action},isLoading:function(){return this.loading}},beforeCreate(){this.loading=!0,this.showLoading(),this.$api.get("api/todo").then((t=>{this.hideLoading(),this.setData(t),this.loading=!1})).catch((t=>{console.log(t),this.$router.push("/login"),this.hideLoading()}))},methods:{deleteItem(t){let e=this.todoData[t].id;this.$api.delete(`api/todo/${e}`).then((e=>{this.todoData.splice(t,1),q.Z.show(e)})).catch((t=>{q.Z.show(t)}))},updateTask(){let t=this.index,e=this.todoData[t].id;this.$api.put(`api/todo/${e}`,this.form).then((e=>{this.todoData[t]=e.data.todo,q.Z.show(e),this.hide()})).catch((t=>{console.log(t),q.Z.show(t)}))},addNewTask(){this.$api.post("api/todo",this.form).then((t=>{this.todoData.push(t.data.todo),q.Z.show(t),this.hide()})).catch((t=>{q.Z.show(t)}))},setItems(t,e){this.action=e,this.index=t,this.isUpdating?(this.form.assigned_to=this.todoData[t].assigned_to,this.form.task=this.todoData[t].task,this.form.notes=this.todoData[t].notes,this.form.status=this.todoData[t].status):(this.form.assigned_to=null,this.form.task=null,this.form.notes=null,this.form.status=null)},show(){this.$refs.updateDialog.show()},hide(){this.$refs.updateDialog.hide(),this.action=""},onOKClick(){this.isUpdating?this.updateTask():this.addNewTask()},setData(t){if(this.canAccess=t.data.todo_access,this.canAdd=t.data.todo_add,this.canModify=t.data.todo_update,this.canDelete=t.data.todo_delete,this.todoData=t.data.todo,t.data){let e=t.data.users;for(let t=0;t<e.length;t++)this.users.push(e[t].username)}}}};var y=s(4379),Z=s(481),v=s(8240),C=s(6778),W=s(151),V=s(8689),T=s(5589),A=s(4842),Q=s(1146),I=s(9367),U=s(7518),$=s.n(U);x.render=_;const L=x;$()(x,"components",{QPage:y.Z,QMarkupTable:Z.Z,QBtn:v.Z,QDialog:C.Z,QCard:W.Z,QForm:V.Z,QCardSection:T.Z,QInput:A.Z,QSelect:Q.Z,QCardActions:I.Z})}}]);